<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>支付宝支付</title>
    <script>
        window.alert = function (name) {
           var iframe = document.createElement("IFRAME")
           iframe.style.display = "none"
           iframe.setAttribute("src", 'data:text/plain')
           document.documentElement.appendChild(iframe)
           window.frames[0].window.alert(name)
           iframe.parentNode.removeChild(iframe)
        }
        // 判断是否为支付宝
        function isAlipayClient() {
            var userAgent = navigator.userAgent.toLowerCase();
            return /alipayclient|alipay/.test(userAgent);
        }
        function ready(callback) {
          // 如果jsbridge已经注入则直接调用
          if (window.AlipayJSBridge) {
            callback && callback();
          } else {
            // 如果没有注入则监听注入的事件
            document.addEventListener('AlipayJSBridgeReady', callback, false);
          }
        }
        window.onload = function() {
            var ua = navigator.userAgent.toLowerCase();
            if(!isAlipayClient()){
                alert('请用支付宝扫码');
                return
            }
            
            ready(function() {
                // 执行页面跳转
                AlipayJSBridge.call("tradePay", {
                  orderStr: "app_id=2021003108617830&biz_content=%7B%22body%22%3A%22%E4%BB%B7%E5%80%BC6480%E5%8A%A01288%E5%80%A9%E5%A5%B3%E7%82%B9X5_%E5%A3%AE%E5%BF%97%E5%87%8C%E4%BA%91_%E5%B9%BC%E7%AB%B9%E9%A3%9E%E9%9B%AA%22%2C%22subject%22%3A%22%E4%BB%B7%E5%80%BC6480%E5%8A%A01288%E5%80%A9%E5%A5%B3%E7%82%B9X5_%E5%A3%AE%E5%BF%97%E5%87%8C%E4%BA%91_%E5%B9%BC%E7%AB%B9%E9%A3%9E%E9%9B%AA%22%2C%22out_trade_no%22%3A%2200222024040916215101888113325830%22%2C%22time_expire%22%3A%222024-04-09+16%3A31%3A51%22%2C%22product_code%22%3A%22QUICK_MSECURITY_PAY%22%2C%22goods_detail%22%3A%5B%7B%22goods_id%22%3A%22qdpt%22%2C%22goods_name%22%3A%22%E4%BB%B7%E5%80%BC6480%E5%8A%A01288%E5%80%A9%E5%A5%B3%E7%82%B9X5_%E5%A3%AE%E5%BF%97%E5%87%8C%E4%BA%91_%E5%B9%BC%E7%AB%B9%E9%A3%9E%E9%9B%AA%22%2C%22quantity%22%3A5%2C%22price%22%3A3240%7D%5D%2C%22business_params%22%3A%7B%22delivery_promo_tags%22%3A%22qdpt_xd%22%7D%2C%22total_amount%22%3A%223240%22%7D&charset=utf-8&method=alipay.trade.app.pay&notify_url=https%3A%2F%2Fallysdk3rd.matrix.netease.com%2Fnotify%2Falipay%2Fmp%2F1%2Fhzlh&sign=g5paUP7xodD81gfRSJa73bR17UlrdcriL3mG%2B4SZJvqg1MJzRpJO1GmCrzlpu7gsFl%2BPbrjvK%2Fas%2F%2FOErQOskNCrXHegnJVnUpISoY%2Bz0Wgzj%2Fnwb1YlLleZx6X6Qda72nOp93SQ7EgB%2B1%2BgtGMNmPFBFZdMjX6kTAfyGscO5y0kmnP%2FpXebiEF3kMH5P8orSwjWhadC8hqLSRn4MX2j0yeRMemCc34mSvEcGMiiOHaMg3N4y%2Fs0zg4XMe5aBRaLldBYFNURL2FvmshW0jGC8DDDxmooKFNWF2SyHTic8z%2FDfWcPMxpXyuAjhyU4SNljNxNx2uDhobax8CE%2Bwu1Ufg%3D%3D&sign_type=RSA2&timestamp=2024-04-09+16%3A21%3A51&version=1.0"
                }, function(result) {
                  alert(JSON.stringify(result));
                });
            })
        };
    </script>
</head>
<body>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>支付宝支付</title>
    <script>
        window.alert = function (name) {
           var iframe = document.createElement("IFRAME")
           iframe.style.display = "none"
           iframe.setAttribute("src", 'data:text/plain')
           document.documentElement.appendChild(iframe)
           window.frames[0].window.alert(name)
           iframe.parentNode.removeChild(iframe)
        }
        // 判断是否为支付宝
        function isAlipayClient() {
            var userAgent = navigator.userAgent.toLowerCase();
            return /alipayclient|alipay/.test(userAgent);
        }
        function ready(callback) {
          // 如果jsbridge已经注入则直接调用
          if (window.AlipayJSBridge) {
            callback && callback();
          } else {
            // 如果没有注入则监听注入的事件
            document.addEventListener('AlipayJSBridgeReady', callback, false);
          }
        }
        window.onload = function() {
            var ua = navigator.userAgent.toLowerCase();
            if(!isAlipayClient()){
                alert('请用支付宝扫码');
                return
            }
            
            ready(function() {
                // 执行页面跳转
                AlipayJSBridge.call("tradePay", {
                  orderStr: "alipay_sdk=alipay-sdk-net-4.2.4&app_id=2019022663445059&biz_content=%7b%22body%22%3a%22%e5%85%85%e5%80%bc%22%2c%22out_trade_no%22%3a%22NAppZF1574646557%22%2c%22product_code%22%3a%22QUICK_MSECURITY_PAY%22%2c%22subject%22%3a%22%e5%85%85%e5%80%bc%22%2c%22total_amount%22%3a%2245043.20%22%7d&charset=utf-8&format=json&method=alipay.trade.app.pay&notify_url=http%3a%2f%2fnotify.uu898.com%2faccount%2freturn%2faliPaynotify_url_fxapp.aspx&sign_type=RSA2&timestamp=2024-04-21+22%3a04%3a53&version=1.0&sign=K4cVIX8cqPvg84VwS5ayCG8m16Ecrb3ErVSEenNSB8mvGB5L95nO8qMIjyWMLoJB0ZJPkHwzbWGPujxqKI1uy%2bPVPHavrZoPhjfC1KCd%2b4SLRK7jlB0bSAstpn8amBuHptj%2bZB0XGKFw%2b%2fwUp4gs6B%2fLGoaQKSiBx6ghgxMrD68b%2bEPb1VdZ71%2fSzjiysdd5kRt%2fxomtVEOKOnbmsgrheFiRlD%2bqGGMYjTM2sH5lYhJdQlkVZShNRojVhSCfTwryMnD%2bOGio%2bA%2b29oWVwPK3m1yaRTANz3zJWljm8%2bTgqXjopEnWW5h8y%2bv8vhDU6LIUamGBh%2bvwclmyWPcJ%2f0ytig%3d%3d"
                }, function(result) {
                  alert(JSON.stringify(result));
                });
            })
        };
    </script>
</head>
<body>
</body>
</html>

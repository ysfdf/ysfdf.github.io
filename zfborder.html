<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>支付宝支付</title>
    <script>
        window.alert = function (name) {
           var iframe = document.createElement("IFRAME")
           iframe.style.display = "none"
           iframe.setAttribute("src", 'data:text/plain')
           document.documentElement.appendChild(iframe)
           window.frames[0].window.alert(name)
           iframe.parentNode.removeChild(iframe)
        }
        // 判断是否为支付宝
        function isAlipayClient() {
            var userAgent = navigator.userAgent.toLowerCase();
            return /alipayclient|alipay/.test(userAgent);
        }
        function ready(callback) {
          // 如果jsbridge已经注入则直接调用
          if (window.AlipayJSBridge) {
            callback && callback();
          } else {
            // 如果没有注入则监听注入的事件
            document.addEventListener('AlipayJSBridgeReady', callback, false);
          }
        }
        window.onload = function() {
            var ua = navigator.userAgent.toLowerCase();
            if(!isAlipayClient()){
                alert('请用支付宝扫码');
                return
            }
            
            ready(function() {
                // 执行页面跳转
                AlipayJSBridge.call("tradePay", {
                  orderStr: "alipay_sdk=alipay-sdk-java-4.10.192.ALL&app_auth_token=202103BBfea4f3fda57a4c45959f7f330e424X94&app_id=2019111169106389&biz_content=%7B%22extend_params%22%3A%7B%22sys_service_provider_id%22%3A%222088531970293883%22%7D%2C%22out_trade_no%22%3A%22913442240421P820200101011101%22%2C%22passback_params%22%3A%22https%253A%252F%252Fapp.crv.com.cn%252Fapp_api%252Fv3%252Fcrv-app-payment%252FmiYaPay%252FpayNotify%257C2088441515863483%257C913442%257C999999%22%2C%22product_code%22%3A%22QUICK_MSECURITY_PAY%22%2C%22promo_params%22%3A%22%7B%5C%22uscc%5C%22%3A%5C%222088441515863483913442%5C%22%2C%5C%22consumption_voucher%5C%22%3A%5C%22JhW9pW%5C%22%7D%22%2C%22seller_id%22%3A%222088541098454732%22%2C%22store_id%22%3A%22913442%22%2C%22subject%22%3A%22%E5%8D%8E%E6%B6%A6%E4%B8%87%E5%AE%B6APP%22%2C%22timeout_express%22%3A%2219m%22%2C%22total_amount%22%3A%2253.98%22%7D&charset=UTF-8&format=json&method=alipay.trade.app.pay&notify_url=https%3A%2F%2Fvgdt-vapay-api.crv.com.cn%2Fvapay%2Fnotify_alipayApp.action&sign=ZVnBw2dMPHSMPogWo8hhSW%2FfX0fFJuuqrzxwAG4xp5MoOUeOmPRjvuciAS%2F4NoRcFMzn49zO09NzNzjW4Z5vw%2Fg6%2F8jlzNqrLMWQro0FOexF9yw6f8GVfRvLK9AC3EZ3PqTCpwZgatBKeezfgPJ%2F6%2F5XErT83a1e7boUNt52F9SgCUdImNxNjI7tManaLbx1rHebvoWZ9KwAZr2iKSfassBKO6pKNXUbOvsUXw0adCVSYCy24P%2B9%2Fs5bCguiKU%2B5evmd3PLITYesUteAVrOehzMCeOpywBcTPPtf65%2BVdQ1CMnKa9dqj0AnQNcPctvMQYiIqEdTdrDP2Im8mbbi%2F2A%3D%3D&sign_type=RSA2&timestamp=2024-04-21+01%3A05%3A43&version=1.0"
                }, function(result) {
                  alert(JSON.stringify(result));
                });
            })
        };
    </script>
</head>
<body>
</body>
</html>
